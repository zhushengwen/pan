import { exec } from '../index'

describe('tests', function () {
  it('exec resolves an object with stdout and stderr on success', async function () {
    const result = await exec(`"${process.execPath}" --version`)
    result.stdout.should.match(new RegExp(process.version))
    result.stderr.should.equal('')
  })

  it('exec rejects an object with stdout and stderr on error', async function () {
    try {
      await exec(`"${process.execPath}" --asdf`)
      throw new Error('should not be thrown')
    } catch (ex) {
      ex.stdout.should.equal('')
      ex.stderr.should.match(/bad option/)
    }
  })
})
